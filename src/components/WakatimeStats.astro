---
import { getEnv } from "~/lib/env";
import Wakatime from "~/lib/wakatime";
import WakatimeLanguageCard from "./WakatimeLanguageCard.astro";

const env = getEnv();

const wakatime = new Wakatime(env.WAKATIME_API_KEY);

const stats = await wakatime.getStatsWithRange({ range: "last_30_days" });
const statsLastYear = await wakatime.getStatsWithRange({ range: "last_year" });
---

<div class="my-4">
  <h2 class="text-lg leading-none font-bold tracking-tight">Stats</h2>
  <p class="text-muted-foreground leading-none tracking-tight">
    Sourced from Wakatime
  </p>
</div>

<div
  class="grid grid-cols-1 place-items-center items-center gap-4 md:grid-cols-2"
>
  <WakatimeLanguageCard data={stats.data} />
  <WakatimeLanguageCard data={statsLastYear.data} />
</div>
